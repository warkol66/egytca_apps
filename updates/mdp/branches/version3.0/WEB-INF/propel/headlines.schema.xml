<database defaultIdMethod="native" package="headlines.classes" name="application" >

	<table name="headlines_headline" phpName="Headline" description="Headline">

		<column name="id" required="true" primaryKey="true" type="INTEGER" description="Headline Id" autoIncrement="true"/>
		<column name="headline" required="true"  type="VARCHAR" size="255" description="Headline"/>
		<column name="content" required="true"  type="LONGVARCHAR" description="Headline content"/>
		<column name="datePublished" type="TIMESTAMP" description="Fecha de publicacion" />
		<column name="headlineDate" type="TIMESTAMP" description="Fecha del titular" />

		<behavior name="soft_delete" />
		<behavior name="timestampable" />

		<vendor type="mysql">
			<parameter name="Charset" value="utf8"/>
			<parameter name="Collate" value="utf8_general_ci"/>
		</vendor>

	</table>

	<table name="headlines_actor" phpName="HealineActor" isCrossRef="true" description="Headlines / Actors">

		<column name="headlineId" required="true" primaryKey="true" type="INTEGER"  description="Headline ID"/>
		<column name="actorId" required="true" primaryKey="true" type="INTEGER"  description="Actor ID"/>
		<column name="actorType" required="true" primaryKey="true" type="INTEGER"  description="Actor type ID"/>

		<foreign-key foreignTable="headlines_headline" onDelete="cascade">
			<reference local="headlineId" foreign="id"/>
		</foreign-key>

		<foreign-key foreignTable="actors_actor" onDelete="cascade">
			<reference local="actorId" foreign="id"/>
		</foreign-key>

	</table>

	<table name="headlines_issue" phpName="HealineIssue" isCrossRef="true" description="Headlines / Issues">

		<column name="headlineId" required="true" primaryKey="true" type="INTEGER"  description="Headline ID"/>
		<column name="issueId" required="true" primaryKey="true" type="INTEGER"  description="Issues ID"/>

		<foreign-key foreignTable="headlines_headline" onDelete="cascade">
			<reference local="headlineId" foreign="id"/>
		</foreign-key>

		<foreign-key foreignTable="issues_issue" onDelete="cascade">
			<reference local="issueId" foreign="id"/>
		</foreign-key>

	</table>

	<table name="headlines_media" phpName="HeadlineMedia" isCrossRef="true" description="Headlines / Issues">

		<column name="headlineId" required="true" primaryKey="true" type="INTEGER"  description="Headline ID"/>
		<column name="mediaId" required="true" primaryKey="true" type="INTEGER"  description="Medias ID"/>

		<foreign-key foreignTable="headlines_headline" onDelete="cascade">
			<reference local="headlineId" foreign="id"/>
		</foreign-key>

		<foreign-key foreignTable="medias_media" onDelete="cascade">
			<reference local="mediaId" foreign="id"/>
		</foreign-key>

	</table>

</database>
