<database defaultIdMethod="native" package="headlines.classes" name="application" >

	<table name="headlines_headline" phpName="Headline" description="Headline">

		<column name="id" required="true" primaryKey="true" type="INTEGER" description="Headline Id" autoIncrement="true"/>
		<column name="name" required="true"  type="VARCHAR" size="255" description="Headline" primaryString="true" />
		<column name="content" type="LONGVARCHAR" sqlType="MEDIUMTEXT" description="Headline content"/>
		<column name="datePublished" type="TIMESTAMP" description="Fecha de publicacion" />
		<column name="headlineDate" type="TIMESTAMP" description="Fecha del titular" />
		<column name="url" type="VARCHAR" size="255" description="Url del titular" />
		<column name="twitts" type="INTEGER" description="Twitts del titular" />
		<column name="fcb" type="INTEGER" description="Fcb del titular" />
		<column name="gplus" type="INTEGER" description="G+ del titular" />
		<column name="comment" type="INTEGER" description="Comentario del titular" />
		<column name="picture" type="BOOLEAN" description="Foto del titular" />

		<behavior name="soft_delete" />
		<behavior name="timestampable" />

		<vendor type="mysql">
			<parameter name="Charset" value="utf8"/>
			<parameter name="Collate" value="utf8_general_ci"/>
		</vendor>

	</table>

	<table name="headlines_actor" phpName="HeadlineActor" isCrossRef="true" description="Headlines / Actors">

		<column name="headlineId" required="true" primaryKey="true" type="INTEGER"  description="Headline ID"/>
		<column name="actorId" required="true" primaryKey="true" type="INTEGER"  description="Actor ID"/>
		<column name="actorType" required="true" primaryKey="true" type="INTEGER"  description="Actor type ID"/>
		<column name="role" type="INTEGER"  description="Actor role"/>

		<foreign-key foreignTable="headlines_headline" onDelete="cascade">
			<reference local="headlineId" foreign="id"/>
		</foreign-key>

		<foreign-key foreignTable="actors_actor" onDelete="cascade">
			<reference local="actorId" foreign="id"/>
		</foreign-key>

	</table>

	<table name="headlines_issue" phpName="HeadlineIssue" isCrossRef="true" description="Headlines / Issues">

		<column name="headlineId" required="true" primaryKey="true" type="INTEGER"  description="Headline ID"/>
		<column name="issueId" required="true" primaryKey="true" type="INTEGER"  description="Issues ID"/>

		<foreign-key foreignTable="headlines_headline" onDelete="cascade">
			<reference local="headlineId" foreign="id"/>
		</foreign-key>

		<foreign-key foreignTable="issues_issue" onDelete="cascade">
			<reference local="issueId" foreign="id"/>
		</foreign-key>

	</table>

	<table name="headlines_media" phpName="HeadlineMedia" isCrossRef="true" description="Headlines / Issues">

		<column name="headlineId" required="true" primaryKey="true" type="INTEGER"  description="Headline ID"/>
		<column name="mediaId" required="true" primaryKey="true" type="INTEGER"  description="Medias ID"/>

		<foreign-key foreignTable="headlines_headline" onDelete="cascade">
			<reference local="headlineId" foreign="id"/>
		</foreign-key>

		<foreign-key foreignTable="medias_media" onDelete="cascade">
			<reference local="mediaId" foreign="id"/>
		</foreign-key>

	</table>

	<table name="headlines_relation" phpName="HeadlineRelation" isCrossRef="true" description="Tabla de relaciones de titulares">

		<column name="headlineFromId" required="true" primaryKey="true" type="INTEGER"  description="ID Headline origen"/>
		<column name="headlineToId" required="true" primaryKey="true" type="INTEGER"  description="ID Headline destino"/>

		<foreign-key foreignTable="headlines_headline" onDelete="cascade">
			<reference local="headlineFromId" foreign="id"/>
		</foreign-key>

		<foreign-key foreignTable="headlines_headline" onDelete="cascade">
			<reference local="headlineToId" foreign="id"/>
		</foreign-key>

	</table>

</database>
