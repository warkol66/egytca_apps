<database defaultIdMethod="native" package="planning.classes" name="application" >

	<table name="planning_project" phpName="PlanningProject" description="Proyectos">
		<column name="id" primaryKey="true" type="INTEGER" description="Id del proyecto" autoIncrement="true" />
		<column name="name" required="true" type="VARCHAR" size="255" description="Enunciado del proyecto" primaryString="true" />
		<column name="description" type="LONGVARCHAR" description="Descripcion del proyecto"/>

		<column name="operativeObjectiveId" type="INTEGER" description="Objetivo de Impacto"/>

		<column name="responsibleCode" type="INTEGER" description="Position Code"/>
		<column name="version" type="INTEGER" description="Numero de version" />
		<column name="startingYear" type="INTEGER" description="A#o de inicio" />
		<column name="endingYear" type="INTEGER" description="A#o de finalizacion" />
	  <column name="userObjectType" type="VARCHAR" size="100" description="tipo de objeto usuario realizo la accion"/>
	  <column name="userObjectId" type="INTEGER" description="id de objeto usuario realizo la accion"/>

		<foreign-key foreignTable="positions_position" >
			<reference local="responsibleCode" foreign="code" />
		</foreign-key>

		<foreign-key foreignTable="planning_operativeObjective" >
			<reference local="operativeObjectiveId" foreign="id" />
		</foreign-key>

  	<behavior name="timestampable" />

		<behavior name="archivable">
		  <parameter name="log_archived_at" value="true" />
		</behavior>

		<vendor type="mysql">
			<parameter name="Charset" value="utf8"/>
			<parameter name="Collate" value="utf8_general_ci"/>
		</vendor>

	</table>

	<table name="planning_projectLog" phpName="PlanningProjectLog" description="Proyectos - Log">
		<column name="id" primaryKey="true" type="INTEGER" description="Id del proyecto" autoIncrement="true" />
		<column name="projectId" type="INTEGER" description="Id del objetivo de Impacto"/>
		<column name="name" required="true" type="VARCHAR" size="255" description="Enunciado del proyecto" primaryString="true" />
		<column name="description" type="LONGVARCHAR" description="Descripcion del proyecto"/>

		<column name="operativeObjectiveId" type="INTEGER" description="Objetivo de Impacto"/>

		<column name="responsibleCode" type="INTEGER" description="Position Code"/>
		<column name="version" type="INTEGER" description="Numero de version" />
		<column name="startingYear" type="INTEGER" description="A#o de inicio" />
		<column name="endingYear" type="INTEGER" description="A#o de finalizacion" />
	  <column name="userObjectType" type="VARCHAR" size="100" description="tipo de objeto usuario realizo la accion"/>
	  <column name="userObjectId" type="INTEGER" description="id de objeto usuario realizo la accion"/>

		<foreign-key foreignTable="positions_position" >
			<reference local="responsibleCode" foreign="code" />
		</foreign-key>

		<foreign-key foreignTable="planning_operativeObjective" >
			<reference local="operativeObjectiveId" foreign="id" />
		</foreign-key>

  	<behavior name="timestampable" />

		<foreign-key foreignTable="planning_project" >
			<reference local="projectId" foreign="id" />
		</foreign-key>

		<vendor type="mysql">
			<parameter name="Charset" value="utf8"/>
			<parameter name="Collate" value="utf8_general_ci"/>
		</vendor>

	</table>

</database>